sudo: false
language: python
python:
 - "2.6"
 - "2.7"
 - "3.2"
 - "3.3"
 - "3.4"
 - "3.5"
 - "pypy"
 - "pypy3"
 - "pypy3.3-5.2-alpha1"
 - "nightly"

before_install:
 # Save the setuptools version
 - ORIG_SETUPTOOLS_VERSION=`python -c "import setuptools; print('%s' % setuptools.__version__)"`
 - echo setuptools $ORIG_SETUPTOOLS_VERSION
install:
 # A recent setuptools is needed to parse setup.py to create the wheel
 - pip install --upgrade setuptools wheel
 - python setup.py bdist_wheel
 # Reset to original setuptools to confirm the wheel can be installed on
 # Travis without any extra installation steps
 - pip install --upgrade setuptools==$ORIG_SETUPTOOLS_VERSION
 - pip install ./dist/tox_travis-*.whl
script:
 - tox --installpkg ./dist/tox_travis-*.whl

branches:
  only:
    - master
matrix:
  fast_finish: true
